<!DOCTYPE html>
<html lang="en>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial scale=1.0">
	<link rel="stylesheet" href="styles.css">
	<title></title>
</head>
<body>
	<script type="text/javascript">
		//nameFunc validates input for name of the user.
		function nameFunc()
		{
			var name= document.getElementById("name").value;
			localStorage.setItem("txtValue", name);//for use in verification page

			var allowed_format = /^[a-zA-Z]+ [a-zA-Z]+$/;  // /^[a-zA-Z\s]+$/; //regex for accepting only [A-Z][a-z].
			
			if (name == "") 
			{
				alert("Name can’t be blank or empty !!!");
			    return false;
			}
			if (name.length<4)
			{
				alert("Minimum 4 characters required");
				return false;
			}
			if (name.match(allowed_format))
			{
				return true;	
			}
			else
			{
				alert("Only Alphabets allowed [A-Z][a-z] with firstname and lastname");
				return false;
			}
		}
		//emailFunc used for validating email input.
		function emailFunc()//not working properly.
		{
			var email=document.getElementById("email").value;

			if (email === "") 
			{
				alert("email can’t be blank or empty !!!");
			    return false;
			}
			else
			{
				return true;
			}

		}

		function phoneFunc() 
		{
			var inpField = document.getElementById("phone");
			var inputno=document.getElementById("phone").value;//used it for creating substring to find operator and state.
			localStorage.setItem("txtValue2", inputno);//for use in verification page.
			var l = inpField.value.length;
			var key = event.inputType;

			//creating operator substring and saved it to localStorage.
			var operator=inputno.substring(1, 4);
			localStorage.setItem("operator", operator);

			//creating state substring and saved it to localStorage.
			var state=inputno.substring(6, 9);
			localStorage.setItem("state", state);

			  //checking the inputs to add the required pattern.
			switch (l) {
			  case 1:
			    inpField.value = "(" + inpField.value;
			    break
			  case 4:
			    inpField.value = inpField.value + ") ";
			    break
			  case 9:
			    inpField.value = inpField.value + " - ";
		        break
	   		  case 17:
		        // prevents user from typing more numbers than necessary:
			    inpField.value = inpField.value.slice(0, l - 1);

			}
			
			//Validating and finding correct Phone operator and printing them.
			
			if(operator>=621 && operator!=800)
			{
				if(operator<=799 && operator>=621)
				{
					document.getElementById("phone_message").innerHTML="Reliance Jio,";
				
				}
				if(operator<=920 && operator>=801)
				{
					document.getElementById("phone_message").innerHTML="Idea,";

				}
				if(operator<=999 && operator>=921)
				{
					document.getElementById("phone_message").innerHTML="Vodafone,";
				}

			}
			else if((operator<=620 || operator==800) && operator.length>=3)
			{
				alert("Invalid number");
				document.getElementById('Form').reset();
				return false;
				//document.getElementById("phone").value='';
				
			}
				

			var t=0;//temp variable created for while loop.
			while(t==0 && state.length>2)
			{
				if(state==1)//validating and finding correct State and printing them
				{
					document.getElementById("statecode").innerHTML=" Andhra Pradesh";
					t+=1;
					continue;
				}
				if(state==2)
				{
					document.getElementById("statecode").innerHTML=" Arunachal Pradesh";
					t+=1;
					continue;
				}
				if(state==3)
				{
					document.getElementById("statecode").innerHTML=" Assam";
					t+=1;
					continue;
				}
				if(state==4)
				{
					document.getElementById("statecode").innerHTML=" Bihar";
					t+=1;
					continue;
				}
				if(state==5)
				{
					document.getElementById("statecode").innerHTML=" Chhattisgarh";
					t+=1;
					continue;
				}
				if(state==6)
				{
					document.getElementById("statecode").innerHTML=" Goa";
					t+=1;
					continue;
				}
				if(state==7)
				{
					document.getElementById("statecode").innerHTML=" Gujarat";
					t+=1;
					continue;
				}
				if(state==8)
				{
					document.getElementById("statecode").innerHTML=" Haryana";
					t+=1;
					continue;
				}
				if(state==9)
				{
					document.getElementById("statecode").innerHTML=" Himachal Pradesh";
					t+=1;
					continue;
				}
				if(state==10)
				{
					document.getElementById("statecode").innerHTML=" Jharkhand";
					t+=1;
					continue;
				}
				if(state==11)
				{
					document.getElementById("statecode").innerHTML=" Karnataka";
					t+=1;
					continue;
				}
				if(state==12)
				{
					document.getElementById("statecode").innerHTML=" Kerala";
					t+=1;
					continue;
				}
				if(state==13)
				{
					document.getElementById("statecode").innerHTML=" Madhya Pradesh";
					t+=1;
					continue;
				}
				if(state==14)
				{
					document.getElementById("statecode").innerHTML=" Maharashtra";
					t+=1;
					continue;
				}
				if(state==15)
				{
					document.getElementById("statecode").innerHTML=" Manipur";
					t+=1;
					continue;
				}
				if(state==16)
				{
					document.getElementById("statecode").innerHTML=" Meghalaya";
					t+=1;
					continue;
				}
				if(state==17)
				{
					document.getElementById("statecode").innerHTML=" Mizoram";
					t+=1;
					continue;
				}
				if(state==18)
				{
					document.getElementById("statecode").innerHTML=" Nagaland";
					t+=1;
					continue;
				}
				if(state==19)
				{
					document.getElementById("statecode").innerHTML=" Odisha";
					t+=1;
					continue;
				}
				if(state==20)
				{
					document.getElementById("statecode").innerHTML=" Punjab";
					t+=1;
					continue;
				}
				if(state==21)
				{
					document.getElementById("statecode").innerHTML=" Rajasthan";
					t+=1;
					continue;
				}
				if(state==22)
				{
					document.getElementById("statecode").innerHTML=" Sikkim";
					t+=1;
					continue;
				}
				if(state==23)
				{
					document.getElementById("statecode").innerHTML=" Tamil Nadu";
					t+=1;
					continue;
				}
				if(state==24)
				{
					document.getElementById("statecode").innerHTML=" Telangana";
					t+=1;
					continue;
				}
				if(state==25)
				{
					document.getElementById("statecode").innerHTML=" Tripura";
					t+=1;
					continue;
				}
				if(state==26)
				{
					document.getElementById("statecode").innerHTML=" Uttar Pradesh";
					t+=1;
					continue;
				}
				if(state==27)
				{
					document.getElementById("statecode").innerHTML=" Uttarakhand";
					t+=1;
					continue;
				}
				if(state==28)
				{
					document.getElementById("statecode").innerHTML=" West Bengal";
					t+=1;
					continue;
				}
				if(state==29)
				{
					document.getElementById("statecode").innerHTML=" Andaman and Nicobar Islands";
					t+=1;
					continue;
				}
				if(state==30)
				{
					document.getElementById("statecode").innerHTML=" Chandigarh";
					t+=1;
				continue;
				}
				if(state==31)
				{
					document.getElementById("statecode").innerHTML="Daman Diu";
					t+=1;
					continue;
				}
				if(state==32)
				{
					document.getElementById("statecode").innerHTML=" Delhi";
					t+=1;
					continue;
				}
				if(state==33)
				{
					document.getElementById("statecode").innerHTML=" Jammu and Kashmir";
					t+=1;
					continue;
				}
				if(state==34)
				{
					document.getElementById("statecode").innerHTML=" Ladakh";
					t+=1;
					continue;
				}
				if(state==35)
				{
					document.getElementById("statecode").innerHTML=" Lakshadweep";
					t+=1;
					continue;
				}
				if(state==36)
				{
					document.getElementById("statecode").innerHTML=" Puducherry";
					t+=1;
					continue;
				}
				else if(t==0)
				{
					alert("Invalid number");
					document.getElementById('Form').reset();
					return false;
					//document.getElementById("phone").value='';

				}
				
			}
			
		}
		
		
		function generateOTP() {
		          
		    // Declare a digits variable 
		    // which stores all digits
		    var digits = '0123456789';
		    let OTP = '';
		    for (let i = 0; i < 4; i++ ) {
		        OTP += digits[Math.floor(Math.random() * 10)];
		    }
		    localStorage.setItem("otp", OTP);
		    
		    return OTP;
		    
		}
		generateOTP();
		//document.write("OTP of 4 digits: ")
		//document.write( generateOTP() );
		//localStorage.clear();


		
	</script>
	<form id="Form" action="verification.html" onsubmit="return nameFunc()" method="GET">
		<div><label>The form will be reset completely if Phone Number is invalid!</label></div>
		<div>
			<label>Name</label>
			<input type="text" id="name" name="name" required>
			<span id="name_message"> </span>
		</div>

		<div>
			<label for="email">Email</label>
			<input type="email" id="email" name="email" oninput="emailFunc()"  value="" required>
			<span id="email_message"> </span>
		</div>

		<div>
			<label>Phone</label>
			<input type="tel" id="phone" oninput="phoneFunc()" placeholder="(###) ### - ####" required pattern="\([0-9]{3}\) [0-9]{3} - [0-9]{4}" required>
			<span id="phone_message"></span>
			<span id="statecode"></span>	
		</div>
		<input type="submit" onsubmit="return generateOTP()" value="Submit">
		<span id="otpshow"></span>
	</form>


</body>
</html>
